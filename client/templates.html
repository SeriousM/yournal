<head>
  <title>Yournal</title>
</head>

<body>
  {{renderRouter}}
</body>

<template name="home">
  {{> navigation}}
  <div class="container">
    <div class="row">
      <div class="col-md-5 col-md-offset-3">
          {{> signinForm}}
      </div>
    </div>
  </div>
</template>

<template name="inlineTutorial">
  <div class="jumbotron">
    <h1>Hello, {{currentUser.username}}!</h1>
    <p>Here you can create your journal posts.</p>
    <p>Every post is hidden by default to protect it against keen eyes!<br>
    Just click on the <span class="glyphicon glyphicon-eye-close"></span> to toggle the visibility!</p>
    <p>This message will disapear once you created your first entry.</p>
    <p>Have fun!</p>
  </div>
</template>

<template name="navigation">
  <nav class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Yournal</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      {{! the margin-right setting is a hack to keep the logout button in the navbar }}
        <ul class="nav navbar-nav navbar-right" style="margin-right: 0">
          {{#if currentUser}}
            <li><p class="navbar-text">Signed in as {{currentUser.username}}</p></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-cog"></span> Settings <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">Comming soon</a></li>
              </ul>
            </li>
            <li><button type="button" id="logout" class="btn btn-default navbar-btn">Logout</button></li>
          {{/if}}
        </ul>
      </div>
    </div>
  </nav>
</template>

<template name="write">
  {{> navigation}}
  <div class="container">
    {{#each posts}}
      <div class="panel panel-{{getColor mood}}">
        <div class="panel-heading toggle-post hand">
          <h3 class="panel-title"><span class="show-hide-icon glyphicon glyphicon-eye-close"></span>{{getDateFormat timestamp}}<span class="pull-right glyphicon glyphicon-{{getGlyphName mood}}"></span></h3>
        </div>
        <div class="panel-body" style="display: none;">
          {{#markdown}}{{#emoji}}{{message}}{{/emoji}}{{/markdown}}
        </div>
      </div>
    {{else}}
      {{> inlineTutorial}}
    {{/each}}
  </div>

  <div id="footer">
    <div class="container">
      <div class="col-md-12" style="padding-top: 10px;">
        <div class="col-md-7">
          <div class="form-group">
            <textarea class="form-control" rows="1" id="message" placeholder="Hi, how was your day today?"></textarea>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <div class="input-group date" id="datetimepicker" data-date-format="DD. MMMM YYYY, HH:mm">
              <input type="text" class="form-control" />
              <span class="input-group-addon">
                <span class="glyphicon glyphicon-calendar"></span>
              </span>
            </div>
          </div>
        </div>
        <div class="col-md-1">
          <select id="mood" class="span1">
            <option value="happy" data-content="<span class='label label-success'><span class='glyphicon glyphicon-heart'></span></span>"></option>
            <option value="ok" data-content="<span class='label label-info'><span class='glyphicon glyphicon-thumbs-up'></span></span>" selected></option>
            <option value="neutral" data-content="<span class='label label-primary'><span class='glyphicon glyphicon-user'></span></span>" selected></option>
            <option value="dangerous" data-content="<span class='label label-warning'><span class='glyphicon glyphicon-screenshot'></span></span>"></option>
            <option value="angry" data-content="<span class='label label-danger'><span class='glyphicon glyphicon-fire'></span></span>"></option>
          </select>
        </div>
        <div class="col-md-1">
          <div class="form-group">
            <button type="button" class="btn btn-success disabled" id="createMessage">Create!</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>